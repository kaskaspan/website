## 阶段 3 · 高级交互与可访问性（规划）

### 目标

- 基于 Typing Core 与课程体系，强化视觉/听觉反馈：虚拟手势、音效、语音提醒。
- 提升可访问性与个性化体验：色盲模式、动画减弱、One-hand 模式等设置面板扩展。
- 为后续阶段（分析、教师端）提供更丰富的交互与辅助数据采集。

### 计划交付

1. **视觉层**
   - 虚拟手（初版）：SVG/Canvas 动画标示手指移动，可选透明度。
   - 虚拟键盘状态增强：正确/错误高亮、按压动画。
   - 高对比度/色盲主题切换。

2. **音频/语音**
   - 键音系统 MVP：支持不同键盘音色、音量调节。
   - 语音提示原型：使用 Web Speech API 或预录音（字母/单词级）。
   - 音效设置整合至 Preferences 并持久化。

3. **可访问性设置**
   - 设置面板新增动画减弱、色盲模式、屏幕阅读器提示开关。
   - One-hand 模式 UI 提示，配合课程推荐。
   - 提供 Keyboard Shortcuts 说明模块。

4. **状态管理**
   - 扩展 `preferences` slice：音频、可访问性等新字段与 actions。
   - 增加 `ui` slice（必要时）统筹设置面板状态。

5. **文档 & 测试**
   - `stage3-audio-accessibility.md`：音频系统与辅助功能设计细节。
   - `stage3-virtual-hands.md`：虚拟手组件结构与动画方案。
   - 对音频 hook、虚拟手组件进行单元/可访问性测试。

### 实施步骤建议

1. 拓展 `preferences` 类型与 slice，加入音频/可访问性设置。
2. 搭建键音管理器（Web Audio API），实现基础 `useKeySound` hook。
3. 实现虚拟手组件（SVG + CSS 动画），与 `VirtualKeyboard` 状态联动。
4. 更新 TypingGame 结构：
   - 按设置显示虚拟手。
   - 音效根据 keydown 调用。
   - 提供设置面板入口。
5. 集成语音/动画减弱选项，考虑用户偏好持久化。
6. 补写文档与测试，更新 README 状态。

### 前提依赖

- 阶段 1 Typing Core 与阶段 2 课程体系路线清晰。
- 拥有基础的 `preferences` slice，可直接扩展。
- Web Audio / Web Speech 功能需在浏览器环境下测试。

完成阶段 3 后，平台将在视觉交互与可访问性方面达到 TypingClub 级别体验，为阶段 4 的数据分析与阶段 5 的课堂管理打下基础。

